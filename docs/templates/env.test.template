# ==============================================================================
# TEST ENVIRONMENT TEMPLATE (CI/CD)
# ==============================================================================
#
# Copy this file to .env for automated testing:
#   $ cp .env.test.template .env
#
# Optimized for CI/CD with shorter timeouts, mock APIs, and test-friendly settings.
#
# ==============================================================================

# Environment & Debug
ENV=test
DEBUG=false

# GPT-5 Configuration
OPENAI_API_KEY=test_key  # Mock key for testing
GPT5_MODEL_NAME=gpt-5
GPT5_DEFAULT_REASONING_EFFORT=low
GPT5_DEFAULT_VERBOSITY=low
GPT5_MAX_TOKENS=1024  # Reduced for faster tests
GPT5_TEMPERATURE=0.0  # Deterministic for tests

# Reasoning System
ENABLE_DYNAMIC_REASONING=false  # Simplified for tests
REASONING_MINIMAL_TIMEOUT=2
REASONING_LOW_TIMEOUT=5
REASONING_MEDIUM_TIMEOUT=10
REASONING_HIGH_TIMEOUT=15
TRIGGER_PHRASES="think harder"
COMPLEXITY_THRESHOLD_HIGH=0.8
COMPLEXITY_THRESHOLD_MEDIUM=0.5

# Token Conservation
ENABLE_RESPONSE_CHAINING=false  # Simplified for tests
MAX_CHAIN_LENGTH=1
ENABLE_CONTEXT_COMPRESSION=false

# External AI Services
PERPLEXITY_API_KEY=test_perplexity_key

# Monitoring & Tracing
LANGSMITH_API_KEY=test_langsmith_key
LANGSMITH_PROJECT=deep-agent-agi-test
LANGSMITH_ENDPOINT=https://api.smith.langchain.com
LANGSMITH_TRACING_V2=false  # Disable tracing in tests

# Prompt Optimization (disabled in tests)
OPIK_API_KEY=test_opik_key
OPIK_WORKSPACE=test_workspace
OPIK_PROJECT=test-project

# Database (Phase 1 - test database)
DATABASE_URL=postgresql://test:test@localhost:5432/test_db
POSTGRES_USER=test
POSTGRES_PASSWORD=test
POSTGRES_DB=test_db
ENABLE_PGVECTOR=false

# Checkpointer
CHECKPOINT_DB_PATH=:memory:  # In-memory for tests
CHECKPOINT_CLEANUP_DAYS=1

# Streaming Configuration
STREAM_VERSION=v2
STREAM_ALLOWED_EVENTS=on_chat_model_stream,on_chat_model_end,on_tool_start,on_tool_end
STREAM_TIMEOUT_SECONDS=60  # 1 minute (fast for CI/CD)
TOOL_EXECUTION_TIMEOUT=15
WEB_SEARCH_TIMEOUT=10
MAX_TOOL_CALLS_PER_INVOCATION=3  # Reduced for faster tests

# WebSocket & Event Processing
HEARTBEAT_INTERVAL_SECONDS=1
EVENT_QUEUE_TIMEOUT_SECONDS=0.5
CHECKPOINT_GRACE_PERIOD_SECONDS=2.0

# Redis (Phase 2 - mock for tests)
REDIS_URL=redis://localhost:6379/1
REDIS_PASSWORD=test_redis
CACHE_TTL=60  # Short TTL for tests

# FastAPI Backend
API_HOST=127.0.0.1  # Localhost only for tests
API_PORT=8000
API_RELOAD=false  # No reload in tests
CORS_ORIGINS=http://localhost:3000
API_VERSION=v1

# Frontend Configuration
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NEXT_PUBLIC_ENABLE_REASONING_UI=false  # Simplified UI for tests

# MCP Servers
PLAYWRIGHT_HEADLESS=true  # Headless for CI/CD
PLAYWRIGHT_BROWSERS_PATH=~/.cache/ms-playwright
MCP_PERPLEXITY_TIMEOUT=10
MCP_PLAYWRIGHT_TIMEOUT=30

# Security
SECRET_KEY=test_secret_key_32_characters_long_for_testing
JWT_SECRET=test_jwt_secret_32_characters_long_for_testing
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10  # Short expiry for tests
BCRYPT_ROUNDS=4  # Minimum rounds for speed

# Rate Limiting
RATE_LIMIT_REQUESTS=1000  # High limit for tests
RATE_LIMIT_PERIOD=3600
RATE_LIMIT_REASONING_HIGH=100
RATE_LIMIT_REASONING_PERIOD=3600

# TheAuditor Security
AUDITOR_ENABLED=false  # Disable in tests
AUDITOR_AUTO_SCAN=false
AUDITOR_SCAN_ON_DEPLOY=false

# Logging
LOG_LEVEL=WARNING  # Minimal logging for tests
LOG_FORMAT=json  # Structured for test parsing
ENABLE_STRUCTURED_LOGGING=true
LOG_REASONING_DECISIONS=false

# Performance
MAX_CONCURRENT_REQUESTS=10  # Limited for test stability
REQUEST_TIMEOUT=60
REASONING_QUEUE_SIZE=5
ENABLE_ASYNC_PROCESSING=true

# Feature Flags
ENABLE_HITL=false  # No human interaction in tests
ENABLE_SUB_AGENTS=false  # Simplified for tests
ENABLE_RESEARCH_MODE=false
ENABLE_COST_TRACKING=false
ENABLE_MEMORY_SYSTEM=false

# Development Tools
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILING=false
MOCK_EXTERNAL_APIS=true  # IMPORTANT: Mock APIs in tests

# Replit (not used in tests)
REPL_SLUG=test-repl
REPL_OWNER=test
